# database_rpg_game

## Jerry's Quest

You play as __Jerry__, a man who has been estranged in time within a mysterious forest. You have died several times already, and each time you wake up back in the same clearing. All you have found out so far is that the further you get from this one glen, the more violent and aggressive the creatures become. If you make it far enough, you might just find a way out...

## How to play

__W A S D__ to select a tile <br/>
__[SPACE]__ to act (move / attack) <br/>
__E__ to skip your action <br/>
__Q__ to open your inventory <br/>
__[ESC]__ to quit<br/>
<br/>
Your damage on any attack is calculated as: str + atk<br/>
The atk value is your average atk value, and certain weapons have greater ranges than others<br/>
Additionally, as the distance of your attack increases, your accuracy will decrease<br/>
<br/>
Your character is represented as '<span style="color:blue">@</span>'<br/>
Tiles highlighted in <span style="color:green">green</span> are those within the player's movement range<br/>
Monsters, marked in <span style="color:red">red</span>, will have an exclamation point after them if they are within the player's attack range<br/>
A monster will instead be <span style="color:magenta">magenta</span> if it has just acted<br/>
<br/>
Every 5 floors, there will be a boss encounter. Defeating a boss will unlock a new starting class<br/>
There is currently a total of 20 floors

## System requirements
Must be able to run and compile C++, run python. An external python library (pymysql) will need to be installed. This can be done through terminal installation (type “pip install pymysql” into the terminal). The database used is uploaded to Amazon Web Services, so an internet connection is required to access the database. This application can only be run using Windows (because of the Windows.h C++ include).

In case you need the details of our database to connect to it:
Host: rpggame.ctskhbc7cwkq.us-east-2.rds.amazonaws.com
User: admin
Password: saul22gone
Database: rpggame

## How to run this application
Note: Do not directly run the python script in the db_interface folder (db_interface.py). This script only exists to be called from the main.exe generated by compiling the C++ files and is not supposed to be run on its own.

This application is best run from within visual studio code (this is because the paths that are set up for calls to the python script only seem to work with the main.exe script located in the position that it is put when compiling from VS code (in the bin folder). If you wish to compile and run the C++ script from another location, the path in each system() call may need to be shifted accordingly so that the C++ can call the python script.

Assuming that the VS code environment is setup according to the tutorials published on WhitGit, compile and run the C++ by selecting the main.cpp file, then going to Terminal->Run Build Task...->build project and then Terminal->Run Task...->run.

## More Info
The following is a more in depth description of our application (it is taken from Ryan's
final project reflection). Please read this to get a better understanding of what the code in
our project is doing:

Description of application: Our application is a rogue-lite top-down dungeon crawler. In the game, you move a cursor (marked by “[]”) around a map made up of characters (move the cursor with “w”, “a”, “s”, and “d”. Pressing space during the player’s movement phase will move the user (marked by “@”) to the location of the cursor if the cursor is x characters away from the player position where x is the number associated with the character’s movement (a stat that belongs to the player and which is always apparent during the gameplay). Note that the text that makes up the map that is highlighted in green marks where the player can be moved to as associated with that player’s move stat. After the player moves, any enemies (characters marked by red text) that have a “!” by them are within the players attack range (which can also be seen during gameplay) and can be attacked. Highlighting those enemies that have “!” by them with the cursor and hitting space causes the player to attack the enemy which deals damage to that enemy (the damage dealt depends on the player’s strength attribute as determined by the representative tuple in the save database as well as the attributes of the weapon they are holding as determined by the foreign keys to weapon and enchant in said save tuple). Highlighting an enemy at any time with the cursor displays the enemies health (which is decreased with each player attack) and other stats associated with the enemy such as that enemy’s movement and range. After the player attacks, the enemies will all move, and if they move in range of the player, they will attack the player and cause the player to lose a certain amount of health. Pressing “E” during either the player’s move or attack actions skips that player’s next action. Play then repeats itself until either the player is dead or all monsters are dead. 

If the player defeats all enemies on a map, they are rewarded with some reward (either a permanent stat boost, a new weapon, or a consumable). During this phase of the game, the user must follow the directions shown on screen.

If a player dies at any point, their save must be deleted (this is done by calling a query to the database, see below for query descriptions).

During the playing phase of the game, a player can use consumables by pressing “Q” to bring up the inventory and then hitting the key associated with the consumable that they have collected. Using consumables will increase some stat for the player, either temporarily or permanently.

During the playing phase of the game, hitting “Esc” will quit the game for the player and save that player’s progress. The game can be resumed from the main menu of the game that appears upon application startup. 

The main menu can also be used to delete any save files that are no longer needed.

Throughout the game, several queries will need to be made to the database. A python script is used to query the database using pymysql (this python script is db_interface.py in the db_interface folder). This python script is called from the C++ script through the system() function. The type of query that is called depends on the arguments that are passed into the python script call. There are many queries that are made to the database. These include (but are not limited to): 
*	Queries to generate rewards such as new weapons, consumables, and character unlocks
*	Queries to add/remove consumables to the player’s inventory
*	Queries for generating monsters that appear in each room
*	Queries for retrieving the dimensions, theme, and size of rooms in the database
*	Queries for updating a save’s values (such as the hp and strength values)
*	Queries for adding/deleting saves

These queries are generally called right after a player takes an action that would impact the state of the database or after the user clears a floor.

Every five floors cleared should unlock a new character that the player can use to base a new save off. These unlocks work by calling a query in the python script which changes the value of is_unlocked of the next tuple in the character database to a 1.

Most queries need to return things to the C++ script (such as a list of monsters the player encounters at a specific floor). To do this, the python must write the results of the query to a file that the C++ will scan (runtime_data.txt).

This is the general outline of what our project looks like. Several ideas were not implemented such as items with unique effects, money that could be retrieved from killing enemies, shops where you could spend money, multiple exits from each floor/room, multiple party members that the player could be in control of, factoring in weapon speed in combat, and the implementation of rooms that were not rectangles. These were not implemented for reasons discussed in the contributions section of Ryan's final reflection.
